GET /share/spice/quixey/1052/quixey.spice.js HTTP/1.1
Host: duckduckgo.com
Connection: keep-alive
Accept: */*
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10) AppleWebKit/600.1.25 (KHTML, like Gecko) Version/8.0 Safari/600.1.25
Accept-Language: en-us
Referer: https://duckduckgo.com/
Accept-Encoding: gzip, deflate

HTTP/1.1 200 OK
Server: nginx
Date: Sun, 19 Oct 2014 08:00:06 GMT
Content-Type: application/x-javascript
Content-Length: 7181
Last-Modified: Fri, 17 Oct 2014 18:22:32 GMT
Connection: close
ETag: "54415e68-1c0d"
Expires: Mon, 19 Oct 2015 08:00:06 GMT
Cache-Control: max-age=31536000
Strict-Transport-Security: max-age=31536000
X-DuckDuckGo-Locale: en_US
Accept-Ranges: bytes

(function(){var template=Handlebars.template,templates=Spice.quixey=Spice.quixey||{};templates["buy"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,functionType="function",self=this;function program1(depth0,data,depth1){var buffer="",stack1,helper;buffer+='\n    <a href="';if(helper=helpers.url){stack1=helper.call(depth0,{hash:{},data:data})}else{helper=depth0&&depth0.url;stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper}if(stack1||stack1===0){buffer+=stack1}buffer+='" class="btn">\n        ';stack1=helpers["with"].call(depth0,(stack1=depth0&&depth0.platforms,stack1==null||stack1===false?stack1:stack1[0]),{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n        ";if(helper=helpers.Quixey_platform_name){stack1=helper.call(depth0,{hash:{},data:data})}else{helper=depth0&&depth0.Quixey_platform_name;stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper}buffer+=escapeExpression(stack1)+"\n        ";stack1=helpers["if"].call(depth0,depth1&&depth1.hasPricerange,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n    </a>\n";return buffer}function program2(depth0,data){var buffer="",helper,options;buffer+='\n        <img src="'+escapeExpression((helper=helpers.Quixey_platform_icon||depth0&&depth0.Quixey_platform_icon,options={hash:{},data:data},helper?helper.call(depth0,depth0&&depth0.icon_url,options):helperMissing.call(depth0,"Quixey_platform_icon",depth0&&depth0.icon_url,options)))+'" class="btn__icon  platform_icon">\n        ';return buffer}function program4(depth0,data){var buffer="",helper,options;buffer+="\n             - "+escapeExpression((helper=helpers.Quixey_qprice||depth0&&depth0.Quixey_qprice,options={hash:{},data:data},helper?helper.call(depth0,depth0&&depth0.cents,options):helperMissing.call(depth0,"Quixey_qprice",depth0&&depth0.cents,options)))+"\n        ";return buffer}buffer+='<span class="detail__callout">\n';stack1=helpers.each.call(depth0,depth0&&depth0.editions,{hash:{},inverse:self.noop,fn:self.programWithDepth(1,program1,data,depth0),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\n</span>";return buffer})})();(function(env){var quixey_image_domain="d1z22zla46lb9g.cloudfront.net";env.ddg_spice_quixey=function(api_result){if(!(api_result&&api_result.results&&api_result.results.length)){return Spice.failed("apps")}var qLower=api_result.q.toLowerCase();categories=["action","adventure","arcade","board","business","casino","design","developer tools","dice","education","educational","entertainment","family","finance","fitness","graphics and design","graphics","health and fitness","health","kids","lifestyle","map","medical","music","navigation","networking","news","photography","productivity","puzzle","racing","role playing","simulation","social networking","social","sports","strategy","travel","trivia","utilities","video","weather"],category_alt_start=categories.join("|^"),category_alt_end=categories.join("$|"),category_trigger_regexp=new RegExp("^"+category_alt_start+"|"+category_alt_end+"$","i"),category_match_regexp=new RegExp(qLower.match(category_trigger_regexp),"i");Spice.add({id:"apps",name:"Apps",data:api_result.results,meta:{total:api_result.results.length,itemType:"Apps",sourceName:"Quixey",sourceUrl:"https://www.quixey.com/search?q="+encodeURIComponent(qLower),sourceLogo:{url:DDG.get_asset_path("quixey","quixey_logo.png"),width:"45",height:"12"}},normalize:function(item){if(item.rating_count&&item.rating_count<3){return null}var icon_url=make_icon_url(item),screenshot;if(!icon_url)return null;screenshot=DDG.getProperty(item,"editions.0.screenshots.0.image_url");if(!screenshot)return null;if(item.name&&item.name.toLowerCase()===qLower){item.exactMatch=true}else if(item.developer&&item.developer.name&&item.developer.name.toLowerCase()===qLower){item.boost=true}function toHTTPS(url){return url.replace(/^http:/,"https:")}return{img:toHTTPS(icon_url),title:item.name,heading:item.name,rating:item.rating,reviewCount:DDG.getProperty(item,"editions.0.custom.features.allversions_rating_count")||DDG.getProperty(item,"editions.0.custom.features.rating_count"),url_review:item.dir_url,price:pricerange(item),"abstract":item.short_desc||"",brand:item.developer&&item.developer.name||"",products_buy:Spice.quixey.quixey_buy,img_m:quixey_image(screenshot)}},relevancy:{type:qLower.match(category_trigger_regexp)?"category":"primary",skip_words:["android","app","apple app store","apple app","application","applications","apps","best","blackberry","download","downloaded","droid","enhanced","free","fully featured","google play store","google play","ios","ipad","iphone","ipod touch","ipod","most","playbook","popular","release data","release","sale","search","windows mobile","windows phone 8","windows phone"],category:[{required:"icon_url"},{key:"short_desc"},{key:"name"},{key:"custom.features.category",match:category_match_regexp,strict:false}],primary:[{required:"icon_url"},{key:"name",strict:false}],dup:"name"},sort_fields:{rating:function(a,b){var rank=function(r,count){if(!count)count=1;return r*r*r*count/5};return rank(a.rating,a.reviewCount)>rank(b.rating,b.reviewCount)?-1:1}},sort_default:{category:"rating"},templates:{group:"products",options:{buy:Spice.quixey.buy,variant:"narrow"}}})};function qprice(p){"use strict";if(p==0){return"FREE"}return"$"+(p/100).toFixed(2).toString()}Handlebars.registerHelper("Quixey_qprice",function(obj){"use strict";return qprice(obj)});var quixey_image=function(image_url){return"http://"+quixey_image_domain+image_url.match(/\/image\/.+/)[0]};var make_icon_url=function(item){var domain=quixey_image_domain,icon_url=item.icon_url;if(!icon_url){if(item.editions&&item.editions[0].icon_url)icon_url=item.editions[0].icon_url;else return null}if(item.platforms&&item.platforms.length>0&&item.platforms[0].icon_url){domain=item.platforms[0].icon_url.match(/https?:\/\/([^\/]+)/)[1]}return"http://"+domain+icon_url.match(/\/image\/.+/)[0]};var pricerange=function(item){if(!item||!item.editions)return"";var low=item.editions[0].cents;var high=item.editions[0].cents;var tmp,range,lowp,highp;for(var i in item.editions){tmp=item.editions[i].cents;if(tmp<low)low=tmp;if(tmp>high)high=tmp}lowp=qprice(low);if(high>low){highp=qprice(high);range=lowp+" - "+highp;item.hasPricerange=true}else{range=lowp}return range};Handlebars.registerHelper("Quixey_platform_icon",function(icon_url){"use strict";if(this.id===2004||this.id===2015){return"https://icons.duckduckgo.com/i/itunes.apple.com.ico"}return"/iu/?u="+icon_url+"&f=1"});Handlebars.registerHelper("Quixey_platform_name",function(){"use strict";var name;var platforms=this.platforms;name=platforms[0].name;if(platforms.length>1){switch(platforms[0].name){case"iPhone":case"iPad":name="iOS";break;case"Blackberry":case"Blackberry 10":name="Blackberry";break}}return name})})(this);